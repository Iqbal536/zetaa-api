<!-- dashboard.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard | Zeetasi</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #2563eb;
            --primary-dark: #1d4ed8;
            --secondary: #7c3aed;
            --accent: #f59e0b;
            --dark: #0f172a;
            --light: #f8fafc;
            --gray: #64748b;
            --light-gray: #f1f5f9;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f8fafc;
            color: var(--dark);
            display: flex;
            min-height: 100vh;
        }
        
        /* Sidebar */
        .sidebar {
            width: 280px;
            background: linear-gradient(180deg, #0f172a 0%, #1e293b 100%);
            color: white;
            height: 100vh;
            position: fixed;
            overflow-y: auto;
            transition: all 0.3s ease;
            z-index: 100;
        }
        
        .sidebar-header {
            padding: 30px 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .user-profile {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-top: 30px;
            padding: 15px 20px;
            background-color: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
        }
        
        .avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 1.2rem;
        }
        
        .user-info {
            flex: 1;
        }
        
        .user-name {
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .user-email {
            font-size: 0.85rem;
            opacity: 0.8;
        }
        
        .sidebar-menu {
            padding: 20px 0;
        }
        
        .menu-section {
            margin-bottom: 30px;
        }
        
        .menu-title {
            padding: 0 30px 15px;
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            opacity: 0.6;
            font-weight: 600;
        }
        
        .menu-items {
            list-style: none;
        }
        
        .menu-item {
            margin-bottom: 5px;
        }
        
        .menu-link {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px 30px;
            color: rgba(255, 255, 255, 0.8);
            text-decoration: none;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .menu-link:hover {
            color: white;
            background-color: rgba(255, 255, 255, 0.05);
        }
        
        .menu-link.active {
            color: white;
            background: linear-gradient(90deg, rgba(37, 99, 235, 0.2) 0%, rgba(37, 99, 235, 0) 100%);
            border-left: 4px solid var(--primary);
        }
        
        .menu-link i {
            width: 20px;
            text-align: center;
        }
        
        .menu-badge {
            margin-left: auto;
            background-color: var(--primary);
            color: white;
            font-size: 0.75rem;
            padding: 3px 8px;
            border-radius: 20px;
        }
        
        /* Main Content */
        .main-content {
            flex: 1;
            margin-left: 280px;
            min-height: 100vh;
        }
        
        /* Header */
        .dashboard-header {
            background-color: white;
            box-shadow: var(--shadow);
            padding: 20px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 99;
        }
        
        .header-title h1 {
            font-size: 1.5rem;
            font-weight: 600;
        }
        
        .header-title p {
            color: var(--gray);
            font-size: 0.9rem;
        }
        
        .header-actions {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .ip-display {
            background-color: var(--light-gray);
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .theme-toggle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--light-gray);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .theme-toggle:hover {
            background-color: var(--gray);
            color: white;
        }
        
        .notification-bell {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--light-gray);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            position: relative;
            transition: all 0.3s ease;
        }
        
        .notification-bell:hover {
            background-color: var(--primary);
            color: white;
        }
        
        .notification-badge {
            position: absolute;
            top: 5px;
            right: 5px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background-color: var(--danger);
        }
        
        .user-menu {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 1rem;
        }
        
        /* Dashboard Content */
        .dashboard-content {
            padding: 40px;
        }
        
        .page-title {
            margin-bottom: 40px;
        }
        
        .page-title h2 {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 10px;
        }
        
        .page-title p {
            color: var(--gray);
            font-size: 1.1rem;
        }
        
        /* Stats Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }
        
        .stat-card {
            background: white;
            border-radius: 16px;
            padding: 25px;
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }
        
        .stat-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 20px;
        }
        
        .stat-title {
            color: var(--gray);
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .stat-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }
        
        .whatsapp-icon {
            background-color: rgba(37, 211, 102, 0.1);
            color: #25d366;
        }
        
        .url-icon {
            background-color: rgba(59, 130, 246, 0.1);
            color: #3b82f6;
        }
        
        .requests-icon {
            background-color: rgba(245, 158, 11, 0.1);
            color: #f59e0b;
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 5px;
        }
        
        .stat-change {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.9rem;
        }
        
        .positive {
            color: var(--success);
        }
        
        .negative {
            color: var(--danger);
        }
        
        /* API Key Section */
        .section {
            background: white;
            border-radius: 16px;
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 40px;
        }
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }
        
        .section-title {
            font-size: 1.5rem;
            font-weight: 600;
        }
        
        .section-description {
            color: var(--gray);
            margin-top: 5px;
        }
        
        .btn {
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 500;
            text-decoration: none;
            transition: all 0.3s ease;
            cursor: pointer;
            border: none;
            font-size: 0.95rem;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary {
            background-color: var(--primary);
            color: white;
            border: 2px solid var(--primary);
        }
        
        .btn-primary:hover {
            background-color: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }
        
        .btn-outline {
            background: transparent;
            border: 2px solid var(--gray);
            color: var(--dark);
        }
        
        .btn-outline:hover {
            background-color: var(--light-gray);
        }
        
        /* API Key Cards */
        .api-keys-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
        }
        
        .api-key-card {
            background: var(--light-gray);
            border-radius: 12px;
            padding: 25px;
            position: relative;
            transition: all 0.3s ease;
        }
        
        .api-key-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow);
        }
        
        .api-key-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 20px;
        }
        
        .api-type {
            font-weight: 600;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .whatsapp-tag {
            background-color: rgba(37, 211, 102, 0.2);
            color: #25d366;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .url-tag {
            background-color: rgba(59, 130, 246, 0.2);
            color: #3b82f6;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .api-key-actions {
            display: flex;
            gap: 10px;
        }
        
        .action-btn {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            background-color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid var(--light-gray);
        }
        
        .action-btn:hover {
            background-color: var(--primary);
            color: white;
            border-color: var(--primary);
        }
        
        .api-key-content {
            background-color: white;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            word-break: break-all;
            margin-bottom: 20px;
            position: relative;
        }
        
        .copy-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: none;
            border: none;
            cursor: pointer;
            color: var(--gray);
            transition: color 0.3s ease;
        }
        
        .copy-btn:hover {
            color: var(--primary);
        }
        
        .api-key-footer {
            display: flex;
            justify-content: space-between;
            color: var(--gray);
            font-size: 0.85rem;
        }
        
        .key-status {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .status-active {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: var(--success);
        }
        
        .status-inactive {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: var(--danger);
        }
        
        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            background-color: var(--light-gray);
            border-radius: 12px;
            margin: 30px 0;
        }
        
        .empty-state i {
            font-size: 3rem;
            color: var(--gray);
            margin-bottom: 20px;
        }
        
        .empty-state h3 {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 10px;
        }
        
        .empty-state p {
            color: var(--gray);
            margin-bottom: 30px;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
        }
        
        /* Documentation Section */
        .documentation {
            margin-top: 40px;
        }
        
        .doc-tabs {
            display: flex;
            border-bottom: 2px solid var(--light-gray);
            margin-bottom: 30px;
        }
        
        .doc-tab {
            padding: 15px 25px;
            cursor: pointer;
            font-weight: 500;
            color: var(--gray);
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
        }
        
        .doc-tab.active {
            color: var(--primary);
            border-bottom: 3px solid var(--primary);
        }
        
        .doc-content {
            background-color: var(--light-gray);
            border-radius: 12px;
            padding: 30px;
        }
        
        .code-block {
            background-color: var(--dark);
            color: #f8fafc;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            overflow-x: auto;
            margin: 20px 0;
        }
        
        .language-tag {
            background-color: rgba(255, 255, 255, 0.1);
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            margin-bottom: 15px;
            display: inline-block;
        }
        
        /* Profile Section */
        .profile-section {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 30px;
            margin-bottom: 40px;
        }
        
        .profile-card {
            background: white;
            border-radius: 16px;
            box-shadow: var(--shadow);
            padding: 30px;
        }
        
        .profile-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .profile-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 1.5rem;
        }
        
        .profile-info h3 {
            font-size: 1.5rem;
            margin-bottom: 5px;
        }
        
        .profile-info p {
            color: var(--gray);
        }
        
        .profile-details {
            display: grid;
            gap: 20px;
        }
        
        .detail-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid var(--light-gray);
        }
        
        .detail-label {
            font-weight: 500;
            color: var(--gray);
        }
        
        .detail-value {
            font-weight: 500;
        }
        
        /* Usage History */
        .history-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        .history-table th {
            background-color: var(--light-gray);
            padding: 15px;
            text-align: left;
            font-weight: 600;
            color: var(--dark);
            border-bottom: 2px solid #e2e8f0;
        }
        
        .history-table td {
            padding: 15px;
            border-bottom: 1px solid #e2e8f0;
            color: var(--gray);
        }
        
        .history-table tr:hover {
            background-color: rgba(37, 99, 235, 0.05);
        }
        
        .status-badge {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .status-success {
            background-color: rgba(16, 185, 129, 0.1);
            color: #10b981;
        }
        
        .status-error {
            background-color: rgba(239, 68, 68, 0.1);
            color: #ef4444;
        }
        
        /* AI Assistant Panel */
        .ai-assistant-panel {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow-lg);
            cursor: pointer;
            z-index: 1000;
            transition: all 0.3s ease;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(37, 99, 235, 0.7);
            }
            70% {
                box-shadow: 0 0 0 15px rgba(37, 99, 235, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(37, 99, 235, 0);
            }
        }
        
        .ai-assistant-panel:hover {
            transform: scale(1.1);
            animation: none;
        }
        
        /* Mobile Responsive */
        @media (max-width: 1200px) {
            .sidebar {
                width: 240px;
            }
            
            .main-content {
                margin-left: 240px;
            }
        }
        
        @media (max-width: 992px) {
            .sidebar {
                transform: translateX(-100%);
                width: 280px;
            }
            
            .sidebar.active {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 0;
            }
            
            .menu-toggle {
                display: block;
                background: none;
                border: none;
                color: white;
                font-size: 1.5rem;
                cursor: pointer;
                margin-right: 20px;
            }
            
            .dashboard-header {
                padding: 20px;
            }
        }
        
        @media (max-width: 768px) {
            .dashboard-content {
                padding: 20px;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .api-keys-grid {
                grid-template-columns: 1fr;
            }
            
            .profile-section {
                grid-template-columns: 1fr;
            }
            
            .section-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 20px;
            }
        }
        
        @media (max-width: 480px) {
            .header-actions {
                gap: 10px;
            }
            
            .ip-display, .theme-toggle, .notification-bell {
                width: 35px;
                height: 35px;
                padding: 5px 10px;
                font-size: 0.8rem;
            }
            
            .user-menu {
                gap: 5px;
            }
            
            .user-avatar {
                width: 35px;
                height: 35px;
                font-size: 0.9rem;
            }
            
            .profile-header {
                flex-direction: column;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <div class="logo">
                <i class="fas fa-robot"></i>
                Zeetasi
            </div>
            <div class="user-profile">
                <div class="avatar" id="sidebarAvatar">JD</div>
                <div class="user-info">
                    <div class="user-name" id="sidebarUsername">John Doe</div>
                    <div class="user-email" id="sidebarEmail">john@example.com</div>
                </div>
            </div>
        </div>
        
        <div class="sidebar-menu">
            <div class="menu-section">
                <div class="menu-title">Main</div>
                <ul class="menu-items">
                    <li class="menu-item">
                        <a href="#" class="menu-link active" data-section="dashboard">
                            <i class="fas fa-home"></i>
                            <span>Dashboard</span>
                        </a>
                    </li>
                    <li class="menu-item">
                        <a href="#" class="menu-link" data-section="whatsapp">
                            <i class="fab fa-whatsapp"></i>
                            <span>WhatsApp API</span>
                            <span class="menu-badge" id="whatsappKeyCount">0</span>
                        </a>
                    </li>
                    <li class="menu-item">
                        <a href="#" class="menu-link" data-section="url">
                            <i class="fas fa-link"></i>
                            <span>URL Research API</span>
                            <span class="menu-badge" id="urlKeyCount">0</span>
                        </a>
                    </li>
                    <li class="menu-item">
                        <a href="#" class="menu-link" data-section="documentation">
                            <i class="fas fa-book"></i>
                            <span>Documentation</span>
                        </a>
                    </li>
                </ul>
            </div>
            
            <div class="menu-section">
                <div class="menu-title">Management</div>
                <ul class="menu-items">
                    <li class="menu-item">
                        <a href="#" class="menu-link" data-section="profile">
                            <i class="fas fa-user"></i>
                            <span>Profile</span>
                        </a>
                    </li>
                    <li class="menu-item">
                        <a href="#" class="menu-link" data-section="team">
                            <i class="fas fa-users"></i>
                            <span>Team</span>
                        </a>
                    </li>
                    <li class="menu-item">
                        <a href="#" class="menu-link" data-section="analytics">
                            <i class="fas fa-chart-line"></i>
                            <span>Analytics</span>
                        </a>
                    </li>
                    <li class="menu-item">
                        <a href="#" class="menu-link" data-section="history">
                            <i class="fas fa-history"></i>
                            <span>Usage History</span>
                        </a>
                    </li>
                </ul>
            </div>
            
            <div class="menu-section">
                <div class="menu-title">Settings</div>
                <ul class="menu-items">
                    <li class="menu-item">
                        <a href="#" class="menu-link" data-section="preferences">
                            <i class="fas fa-cog"></i>
                            <span>Preferences</span>
                        </a>
                    </li>
                    <li class="menu-item">
                        <a href="#" class="menu-link" data-section="billing">
                            <i class="fas fa-credit-card"></i>
                            <span>Billing</span>
                        </a>
                    </li>
                    <li class="menu-item">
                        <a href="#" class="menu-link" id="logoutBtn">
                            <i class="fas fa-sign-out-alt"></i>
                            <span>Logout</span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </aside>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Header -->
        <header class="dashboard-header">
            <div style="display: flex; align-items: center; gap: 20px;">
                <button class="menu-toggle" id="menuToggle">
                    <i class="fas fa-bars"></i>
                </button>
                <div class="header-title">
                    <h1>API Dashboard</h1>
                    <p>Manage your WhatsApp Bot and URL Research API keys</p>
                </div>
            </div>
            <div class="header-actions">
                <div class="ip-display" id="ipDisplay">
                    <i class="fas fa-network-wired"></i>
                    <span id="userIp">Loading...</span>
                </div>
                <div class="theme-toggle" id="themeToggle">
                    <i class="fas fa-moon"></i>
                </div>
                <div class="notification-bell">
                    <i class="fas fa-bell"></i>
                    <div class="notification-badge"></div>
                </div>
                <div class="user-menu">
                    <div class="user-avatar" id="headerAvatar">JD</div>
                    <div class="user-name" id="headerUsername">John Doe</div>
                </div>
            </div>
        </header>

        <!-- Dashboard Content -->
        <div class="dashboard-content">
            <!-- Dashboard Section -->
            <div id="dashboardSection">
                <div class="page-title">
                    <h2>My API Keys</h2>
                    <p>Manage and monitor all your API keys in one place</p>
                </div>
                
                <!-- Stats Cards -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-title">WhatsApp API Keys</div>
                            <div class="stat-icon whatsapp-icon">
                                <i class="fab fa-whatsapp"></i>
                            </div>
                        </div>
                        <div class="stat-value" id="whatsappKeysStat">0</div>
                        <div class="stat-change positive">
                            <i class="fas fa-arrow-up"></i>
                            <span id="whatsappGrowth">0 this month</span>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-title">URL Research API Keys</div>
                            <div class="stat-icon url-icon">
                                <i class="fas fa-link"></i>
                            </div>
                        </div>
                        <div class="stat-value" id="urlKeysStat">0</div>
                        <div class="stat-change positive">
                            <i class="fas fa-arrow-up"></i>
                            <span id="urlGrowth">0 this month</span>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-title">API Requests</div>
                            <div class="stat-icon requests-icon">
                                <i class="fas fa-code"></i>
                            </div>
                        </div>
                        <div class="stat-value" id="requestsStat">0</div>
                        <div class="stat-change positive">
                            <i class="fas fa-arrow-up"></i>
                            <span id="requestsGrowth">0% from last month</span>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-title">Success Rate</div>
                            <div class="stat-icon">
                                <i class="fas fa-check-circle" style="background-color: rgba(16, 185, 129, 0.1); color: #10b981;"></i>
                            </div>
                        </div>
                        <div class="stat-value" id="successRateStat">0%</div>
                        <div class="stat-change positive">
                            <i class="fas fa-arrow-up"></i>
                            <span id="successGrowth">0% improvement</span>
                        </div>
                    </div>
                </div>
                
                <!-- WhatsApp API Keys Section -->
                <div class="section">
                    <div class="section-header">
                        <div>
                            <div class="section-title">WhatsApp Bot API Keys</div>
                            <div class="section-description">Create and manage API keys for your WhatsApp automation bots</div>
                        </div>
                        <button class="btn btn-primary" id="createWhatsAppKey">
                            <i class="fas fa-plus"></i>
                            Create New Key
                        </button>
                    </div>
                    
                    <div id="whatsappKeysContainer" class="api-keys-grid">
                        <!-- WhatsApp API keys will be dynamically inserted here -->
                        <div class="empty-state">
                            <i class="fas fa-key"></i>
                            <h3>No WhatsApp API Keys Yet</h3>
                            <p>You haven't created any WhatsApp Bot API keys. Click the "Create New Key" button to get started.</p>
                            <button class="btn btn-primary" id="createWhatsAppKey2">
                                <i class="fas fa-plus"></i>
                                Create Your First Key
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- URL Research API Keys Section -->
                <div class="section">
                    <div class="section-header">
                        <div>
                            <div class="section-title">URL Research API Keys</div>
                            <div class="section-description">Create and manage API keys for URL analysis and research</div>
                        </div>
                        <button class="btn btn-primary" id="createUrlKey">
                            <i class="fas fa-plus"></i>
                            Create New Key
                        </button>
                    </div>
                    
                    <div id="urlKeysContainer" class="api-keys-grid">
                        <!-- URL API keys will be dynamically inserted here -->
                        <div class="empty-state">
                            <i class="fas fa-link"></i>
                            <h3>No URL Research API Keys Yet</h3>
                            <p>You haven't created any URL Research API keys. Click the "Create New Key" button to get started.</p>
                            <button class="btn btn-primary" id="createUrlKey2">
                                <i class="fas fa-plus"></i>
                                Create Your First Key
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Documentation Section -->
            <div id="documentationSection" style="display: none;">
                <div class="page-title">
                    <h2>API Documentation</h2>
                    <p>Comprehensive documentation with code examples</p>
                </div>
                
                <div class="section documentation">
                    <div class="doc-tabs">
                        <div class="doc-tab active" data-tab="whatsapp">WhatsApp API</div>
                        <div class="doc-tab" data-tab="url">URL Research API</div>
                        <div class="doc-tab" data-tab="auth">Authentication</div>
                        <div class="doc-tab" data-tab="errors">Error Codes</div>
                    </div>
                    
                    <div class="doc-content">
                        <div class="language-tag">JavaScript</div>
                        <div class="code-block">
const axios = require('axios');

// WhatsApp API Example
const sendMessage = async () => {
  try {
    const response = await axios.post('https://api.zeetasi.com/whatsapp/send', {
      apiKey: 'YOUR_API_KEY_HERE',
      to: '+1234567890',
      message: 'Hello from Zeetasi!'
    });
    
    console.log('Message sent:', response.data);
  } catch (error) {
    console.error('Error:', error.response.data);
  }
};

// URL Research API Example
const analyzeUrl = async () => {
  try {
    const response = await axios.get('https://api.zeetasi.com/url/analyze', {
      params: {
        apiKey: 'YOUR_API_KEY_HERE',
        url: 'https://example.com'
      }
    });
    
    console.log('Analysis results:', response.data);
  } catch (error) {
    console.error('Error:', error.response.data);
  }
};

sendMessage();
analyzeUrl();
                        </div>
                        
                        <div class="language-tag">Python</div>
                        <div class="code-block">
import requests

# WhatsApp API Example
def send_message():
    url = "https://api.zeetasi.com/whatsapp/send"
    headers = {"Content-Type": "application/json"}
    data = {
        "apiKey": "YOUR_API_KEY_HERE",
        "to": "+1234567890",
        "message": "Hello from Zeetasi!"
    }
    
    response = requests.post(url, json=data, headers=headers)
    print("Message sent:", response.json())

# URL Research API Example
def analyze_url():
    url = "https://api.zeetasi.com/url/analyze"
    params = {
        "apiKey": "YOUR_API_KEY_HERE",
        "url": "https://example.com"
    }
    
    response = requests.get(url, params=params)
    print("Analysis results:", response.json())

send_message()
analyze_url()
                        </div>
                        
                        <div class="language-tag">cURL</div>
                        <div class="code-block">
# WhatsApp API Example
curl -X POST https://api.zeetasi.com/whatsapp/send \
  -H "Content-Type: application/json" \
  -d '{
    "apiKey": "YOUR_API_KEY_HERE",
    "to": "+1234567890",
    "message": "Hello from Zeetasi!"
  }'

# URL Research API Example
curl -X GET "https://api.zeetasi.com/url/analyze?apiKey=YOUR_API_KEY_HERE&url=https://example.com"
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Profile Section -->
            <div id="profileSection" style="display: none;">
                <div class="page-title">
                    <h2>User Profile</h2>
                    <p>Manage your account information and settings</p>
                </div>
                
                <div class="profile-section">
                    <div class="profile-card">
                        <div class="profile-header">
                            <div class="profile-avatar" id="profileAvatar">JD</div>
                            <div class="profile-info">
                                <h3 id="profileName">John Doe</h3>
                                <p id="profileEmail">john@example.com</p>
                                <p id="profileRole">Regular User</p>
                            </div>
                        </div>
                        
                        <div class="profile-details">
                            <div class="detail-item">
                                <span class="detail-label">User ID</span>
                                <span class="detail-value" id="profileUserId">-</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Account Created</span>
                                <span class="detail-value" id="profileCreatedAt">-</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">API Token</span>
                                <span class="detail-value" id="profileApiToken">-</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Company</span>
                                <span class="detail-value" id="profileCompany">-</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="profile-card">
                        <h3 style="margin-bottom: 20px; font-size: 1.3rem;">Edit Profile</h3>
                        <form id="profileForm">
                            <div class="form-group" style="margin-bottom: 20px;">
                                <label for="editFirstName" style="display: block; margin-bottom: 8px; font-weight: 500;">First Name</label>
                                <input type="text" id="editFirstName" class="form-input" style="width: 100%; padding: 12px 16px; border: 2px solid #e2e8f0; border-radius: 8px; font-family: 'Poppins', sans-serif; font-size: 1rem; background-color: #f8fafc;">
                            </div>
                            
                            <div class="form-group" style="margin-bottom: 20px;">
                                <label for="editLastName" style="display: block; margin-bottom: 8px; font-weight: 500;">Last Name</label>
                                <input type="text" id="editLastName" class="form-input" style="width: 100%; padding: 12px 16px; border: 2px solid #e2e8f0; border-radius: 8px; font-family: 'Poppins', sans-serif; font-size: 1rem; background-color: #f8fafc;">
                            </div>
                            
                            <div class="form-group" style="margin-bottom: 20px;">
                                <label for="editEmail" style="display: block; margin-bottom: 8px; font-weight: 500;">Email Address</label>
                                <input type="email" id="editEmail" class="form-input" style="width: 100%; padding: 12px 16px; border: 2px solid #e2e8f0; border-radius: 8px; font-family: 'Poppins', sans-serif; font-size: 1rem; background-color: #f8fafc;">
                            </div>
                            
                            <div class="form-group" style="margin-bottom: 20px;">
                                <label for="editCompany" style="display: block; margin-bottom: 8px; font-weight: 500;">Company/Organization</label>
                                <input type="text" id="editCompany" class="form-input" style="width: 100%; padding: 12px 16px; border: 2px solid #e2e8f0; border-radius: 8px; font-family: 'Poppins', sans-serif; font-size: 1rem; background-color: #f8fafc;">
                            </div>
                            
                            <button type="submit" class="btn btn-primary" style="width: 100%;">Save Changes</button>
                        </form>
                    </div>
                </div>
            </div>
            
            <!-- Team Section -->
            <div id="teamSection" style="display: none;">
                <div class="page-title">
                    <h2>Team Management</h2>
                    <p>Manage your team members and their permissions</p>
                </div>
                
                <div class="section">
                    <div class="section-header">
                        <div>
                            <div class="section-title">Your Team</div>
                            <div class="section-description">Add and manage team members who can access your API keys</div>
                        </div>
                        <button class="btn btn-primary" id="inviteTeamMember">
                            <i class="fas fa-user-plus"></i>
                            Invite Member
                        </button>
                    </div>
                    
                    <div class="empty-state">
                        <i class="fas fa-users"></i>
                        <h3>No Team Members Yet</h3>
                        <p>You haven't invited any team members. Click the "Invite Member" button to add collaborators to your projects.</p>
                        <button class="btn btn-primary" id="inviteTeamMember2">
                            <i class="fas fa-user-plus"></i>
                            Invite Your First Member
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Analytics Section -->
            <div id="analyticsSection" style="display: none;">
                <div class="page-title">
                    <h2>Usage Analytics</h2>
                    <p>Monitor your API usage and performance metrics</p>
                </div>
                
                <div class="section">
                    <div class="section-header">
                        <div>
                            <div class="section-title">API Usage Overview</div>
                            <div class="section-description">Track your API requests and performance over time</div>
                        </div>
                        <div style="display: flex; gap: 10px;">
                            <select id="timeRange" style="padding: 10px 15px; border: 2px solid #e2e8f0; border-radius: 8px; font-family: 'Poppins', sans-serif;">
                                <option value="7">Last 7 Days</option>
                                <option value="30" selected>Last 30 Days</option>
                                <option value="90">Last 90 Days</option>
                                <option value="365">Last Year</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="chart-container" style="height: 300px; background-color: var(--light-gray); border-radius: 12px; display: flex; align-items: center; justify-content: center; margin: 30px 0; color: var(--gray); font-style: italic;">
                        Usage Analytics Chart (Placeholder)
                    </div>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 25px; margin-top: 30px;">
                        <div class="stat-card">
                            <div class="stat-header">
                                <div class="stat-title">Total Requests</div>
                                <div class="stat-icon" style="background-color: rgba(37, 99, 235, 0.1); color: #2563eb;">
                                    <i class="fas fa-code"></i>
                                </div>
                            </div>
                            <div class="stat-value" id="totalRequests">1,247</div>
                            <div class="stat-change positive">
                                <i class="fas fa-arrow-up"></i>
                                <span>12% from previous period</span>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-header">
                                <div class="stat-title">Success Rate</div>
                                <div class="stat-icon" style="background-color: rgba(16, 185, 129, 0.1); color: #10b981;">
                                    <i class="fas fa-check-circle"></i>
                                </div>
                            </div>
                            <div class="stat-value" id="analyticsSuccessRate">98.7%</div>
                            <div class="stat-change positive">
                                <i class="fas fa-arrow-up"></i>
                                <span>0.5% improvement</span>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-header">
                                <div class="stat-title">Average Response Time</div>
                                <div class="stat-icon" style="background-color: rgba(245, 158, 11, 0.1); color: #f59e0b;">
                                    <i class="fas fa-stopwatch"></i>
                                </div>
                            </div>
                            <div class="stat-value" id="avgResponseTime">247ms</div>
                            <div class="stat-change negative">
                                <i class="fas fa-arrow-down"></i>
                                <span>12ms slower</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Usage History Section -->
            <div id="historySection" style="display: none;">
                <div class="page-title">
                    <h2>API Usage History</h2>
                    <p>View detailed logs of all your API requests</p>
                </div>
                
                <div class="section">
                    <div class="section-header">
                        <div>
                            <div class="section-title">Request Logs</div>
                            <div class="section-description">Detailed history of all API calls made with your keys</div>
                        </div>
                        <div style="display: flex; gap: 10px;">
                            <select id="historyFilter" style="padding: 10px 15px; border: 2px solid #e2e8f0; border-radius: 8px; font-family: 'Poppins', sans-serif;">
                                <option value="all">All API Keys</option>
                                <option value="whatsapp">WhatsApp API Only</option>
                                <option value="url">URL Research API Only</option>
                            </select>
                            <button class="btn btn-outline" id="exportHistory">
                                <i class="fas fa-download"></i>
                                Export CSV
                            </button>
                        </div>
                    </div>
                    
                    <table class="history-table">
                        <thead>
                            <tr>
                                <th>Timestamp</th>
                                <th>API Key</th>
                                <th>Endpoint</th>
                                <th>Method</th>
                                <th>Status</th>
                                <th>Response Time</th>
                            </tr>
                        </thead>
                        <tbody id="historyTableBody">
                            <!-- History entries will be dynamically inserted here -->
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- Preferences Section -->
            <div id="preferencesSection" style="display: none;">
                <div class="page-title">
                    <h2>Preferences</h2>
                    <p>Customize your account settings and preferences</p>
                </div>
                
                <div class="section">
                    <div class="section-header">
                        <div>
                            <div class="section-title">Account Preferences</div>
                            <div class="section-description">Manage your notification, theme, and other settings</div>
                        </div>
                    </div>
                    
                    <div style="display: grid; gap: 30px;">
                        <div style="background-color: var(--light-gray); padding: 25px; border-radius: 12px;">
                            <h3 style="margin-bottom: 20px; font-size: 1.2rem; font-weight: 600;">Theme Settings</h3>
                            <div style="display: flex; align-items: center; justify-content: space-between; padding: 15px 0; border-bottom: 1px solid rgba(0, 0, 0, 0.1);">
                                <div>
                                    <div style="font-weight: 500; margin-bottom: 5px;">Dark Mode</div>
                                    <div style="color: var(--gray); font-size: 0.9rem;">Enable dark theme for better visibility in low light</div>
                                </div>
                                <label class="switch" style="position: relative; display: inline-block; width: 60px; height: 34px;">
                                    <input type="checkbox" id="darkModeToggle">
                                    <span style="position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 34px;"></span>
                                    <span style="position: absolute; height: 26px; width: 26px; left: 4px; bottom: 4px; background-color: white; transition: .4s; border-radius: 50%;"></span>
                                </label>
                            </div>
                        </div>
                        
                        <div style="background-color: var(--light-gray); padding: 25px; border-radius: 12px;">
                            <h3 style="margin-bottom: 20px; font-size: 1.2rem; font-weight: 600;">Notification Settings</h3>
                            <div style="display: flex; align-items: center; justify-content: space-between; padding: 15px 0; border-bottom: 1px solid rgba(0, 0, 0, 0.1);">
                                <div>
                                    <div style="font-weight: 500; margin-bottom: 5px;">Email Notifications</div>
                                    <div style="color: var(--gray); font-size: 0.9rem;">Receive email notifications for important updates</div>
                                </div>
                                <label class="switch" style="position: relative; display: inline-block; width: 60px; height: 34px;">
                                    <input type="checkbox" id="emailNotifications" checked>
                                    <span style="position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 34px;"></span>
                                    <span style="position: absolute; height: 26px; width: 26px; left: 4px; bottom: 4px; background-color: white; transition: .4s; border-radius: 50%;"></span>
                                </label>
                            </div>
                            <div style="display: flex; align-items: center; justify-content: space-between; padding: 15px 0; border-bottom: 1px solid rgba(0, 0, 0, 0.1);">
                                <div>
                                    <div style="font-weight: 500; margin-bottom: 5px;">API Usage Alerts</div>
                                    <div style="color: var(--gray); font-size: 0.9rem;">Get notified when you reach 80% of your usage limit</div>
                                </div>
                                <label class="switch" style="position: relative; display: inline-block; width: 60px; height: 34px;">
                                    <input type="checkbox" id="usageAlerts" checked>
                                    <span style="position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 34px;"></span>
                                    <span style="position: absolute; height: 26px; width: 26px; left: 4px; bottom: 4px; background-color: white; transition: .4s; border-radius: 50%;"></span>
                                </label>
                            </div>
                        </div>
                        
                        <div style="background-color: var(--light-gray); padding: 25px; border-radius: 12px;">
                            <h3 style="margin-bottom: 20px; font-size: 1.2rem; font-weight: 600;">Security Settings</h3>
                            <div style="display: flex; align-items: center; justify-content: space-between; padding: 15px 0; border-bottom: 1px solid rgba(0, 0, 0, 0.1);">
                                <div>
                                    <div style="font-weight: 500; margin-bottom: 5px;">Two-Factor Authentication</div>
                                    <div style="color: var(--gray); font-size: 0.9rem;">Add an extra layer of security to your account</div>
                                </div>
                                <button class="btn btn-outline" id="enable2fa">
                                    Enable 2FA
                                </button>
                            </div>
                            <div style="display: flex; align-items: center; justify-content: space-between; padding: 15px 0;">
                                <div>
                                    <div style="font-weight: 500; margin-bottom: 5px;">Change Password</div>
                                    <div style="color: var(--gray); font-size: 0.9rem;">Update your account password</div>
                                </div>
                                <button class="btn btn-outline" id="changePassword">
                                    Change Password
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Billing Section -->
            <div id="billingSection" style="display: none;">
                <div class="page-title">
                    <h2>Billing & Subscription</h2>
                    <p>Manage your subscription plan and payment information</p>
                </div>
                
                <div class="section">
                    <div class="section-header">
                        <div>
                            <div class="section-title">Current Plan</div>
                            <div class="section-description">Manage your subscription and view billing history</div>
                        </div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 2fr; gap: 30px; margin-bottom: 40px;">
                        <div style="background: white; border-radius: 16px; box-shadow: var(--shadow); padding: 30px;">
                            <div style="text-align: center; margin-bottom: 30px;">
                                <div style="background: linear-gradient(135deg, var(--primary), var(--secondary)); color: white; width: 80px; height: 80px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px; font-size: 1.5rem;">
                                    <i class="fas fa-award"></i>
                                </div>
                                <h3 style="font-size: 1.5rem; margin-bottom: 10px;">Starter Plan</h3>
                                <div style="font-size: 2rem; font-weight: 700; color: var(--primary); margin-bottom: 5px;">$0</div>
                                <div style="color: var(--gray);">Free forever</div>
                            </div>
                            
                            <div style="background-color: var(--light-gray); padding: 20px; border-radius: 12px; margin-bottom: 20px;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 15px;">
                                    <span>API Requests</span>
                                    <span>87/100 used</span>
                                </div>
                                <div style="width: 100%; height: 8px; background-color: #e2e8f0; border-radius: 4px; overflow: hidden;">
                                    <div style="width: 87%; height: 100%; background-color: var(--primary);"></div>
                                </div>
                            </div>
                            
                            <button class="btn btn-primary" style="width: 100%;">
                                <i class="fas fa-arrow-up"></i>
                                Upgrade to Professional
                            </button>
                        </div>
                        
                        <div>
                            <h3 style="font-size: 1.3rem; margin-bottom: 20px;">Plan Features</h3>
                            <div style="display: grid; gap: 15px; margin-bottom: 30px;">
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <i class="fas fa-check-circle" style="color: var(--success);"></i>
                                    <span>100 API requests per day</span>
                                </div>
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <i class="fas fa-check-circle" style="color: var(--success);"></i>
                                    <span>1 WhatsApp Bot API Key</span>
                                </div>
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <i class="fas fa-check-circle" style="color: var(--success);"></i>
                                    <span>1 URL Research API Key</span>
                                </div>
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <i class="fas fa-check-circle" style="color: var(--success);"></i>
                                    <span>Basic Analytics</span>
                                </div>
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <i class="fas fa-check-circle" style="color: var(--success);"></i>
                                    <span>Email Support</span>
                                </div>
                            </div>
                            
                            <h3 style="font-size: 1.3rem; margin-bottom: 20px;">Upgrade to Professional</h3>
                            <div style="background-color: var(--light-gray); padding: 20px; border-radius: 12px; margin-bottom: 20px;">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                                    <div>
                                        <div style="font-weight: 600; font-size: 1.2rem;">Professional Plan</div>
                                        <div style="color: var(--gray);">$29 per month</div>
                                    </div>
                                    <button class="btn btn-primary">
                                        Upgrade Now
                                    </button>
                                </div>
                            </div>
                            
                            <h3 style="font-size: 1.3rem; margin-bottom: 20px;">Billing History</h3>
                            <div class="empty-state" style="padding: 30px;">
                                <i class="fas fa-receipt"></i>
                                <h3>No Billing History</h3>
                                <p>You're currently on the free Starter plan. No billing history available.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- AI Assistant Panel -->
    <div class="ai-assistant-panel" id="aiAssistant">
        <i class="fas fa-robot"></i>
    </div>

    <!-- JavaScript -->
    <script>
        // Check if user is logged in
        document.addEventListener('DOMContentLoaded', function() {
            if (localStorage.getItem('isLoggedIn') !== 'true') {
                window.location.href = 'login.html';
            }
            
            // Initialize dashboard
            initDashboard();
        });
        
        function initDashboard() {
            // Get user data
            const username = localStorage.getItem('username') || 'User';
            const email = localStorage.getItem('userEmail') || 'user@example.com';
            const userId = localStorage.getItem('userId') || '-';
            const apiToken = localStorage.getItem('apiToken') || '-';
            const role = localStorage.getItem('role') || 'user';
            
            // Update UI with user data
            document.getElementById('sidebarUsername').textContent = username;
            document.getElementById('sidebarEmail').textContent = email;
            document.getElementById('headerUsername').textContent = username;
            
            // Set avatar initials
            const initials = username.split(' ').map(n => n[0]).join('').substring(0, 2).toUpperCase();
            document.querySelectorAll('.avatar, .user-avatar, .profile-avatar').forEach(el => {
                el.textContent = initials;
                el.style.background = `linear-gradient(135deg, ${getRandomColor()}, ${getRandomColor()})`;
            });
            
            // Update profile section
            document.getElementById('profileName').textContent = username;
            document.getElementById('profileEmail').textContent = email;
            document.getElementById('profileRole').textContent = role === 'owner' ? 'Administrator' : 'Regular User';
            document.getElementById('profileUserId').textContent = userId;
            document.getElementById('profileApiToken').textContent = apiToken;
            
            // Get user from registered users to get additional data
            const registeredUsers = JSON.parse(localStorage.getItem('registeredUsers') || '[]');
            const currentUser = registeredUsers.find(u => u.email === email);
            
            if (currentUser) {
                document.getElementById('profileCreatedAt').textContent = new Date(currentUser.createdAt).toLocaleDateString();
                document.getElementById('profileCompany').textContent = currentUser.company || 'Not specified';
                
                // Fill edit form
                document.getElementById('editFirstName').value = currentUser.firstName || '';
                document.getElementById('editLastName').value = currentUser.lastName || '';
                document.getElementById('editEmail').value = currentUser.email || '';
                document.getElementById('editCompany').value = currentUser.company || '';
            }
            
            // Display user's IP address
            fetch('https://api.ipify.org?format=json')
                .then(response => response.json())
                .then(data => {
                    document.getElementById('userIp').textContent = data.ip;
                })
                .catch(error => {
                    document.getElementById('userIp').textContent = 'Unable to fetch IP';
                    console.error('Error fetching IP:', error);
                });
            
            // Initialize API keys from localStorage
            initApiKeys();
            
            // Initialize usage history
            initUsageHistory();
            
            // Setup event listeners
            setupEventListeners();
        }
        
        function getRandomColor() {
            const colors = ['#2563eb', '#7c3aed', '#f59e0b', '#10b981', '#ef4444', '#8b5cf6', '#06b6d4'];
            return colors[Math.floor(Math.random() * colors.length)];
        }
        
        function initApiKeys() {
            // Get API keys from localStorage
            const whatsappKeys = JSON.parse(localStorage.getItem('whatsappKeys') || '[]');
            const urlKeys = JSON.parse(localStorage.getItem('urlKeys') || '[]');
            
            // Update stats
            document.getElementById('whatsappKeysStat').textContent = whatsappKeys.length;
            document.getElementById('urlKeysStat').textContent = urlKeys.length;
            document.getElementById('whatsappKeyCount').textContent = whatsappKeys.length;
            document.getElementById('urlKeyCount').textContent = urlKeys.length;
            
            // Generate random stats for demo
            document.getElementById('requestsStat').textContent = Math.floor(Math.random() * 5000);
            document.getElementById('successRateStat').textContent = (95 + Math.random() * 5).toFixed(1) + '%';
            
            // Update growth stats
            document.getElementById('whatsappGrowth').textContent = Math.floor(Math.random() * 5) + ' this month';
            document.getElementById('urlGrowth').textContent = Math.floor(Math.random() * 3) + ' this month';
            document.getElementById('requestsGrowth').textContent = Math.floor(Math.random() * 20) + '% from last month';
            document.getElementById('successGrowth').textContent = (0.1 + Math.random() * 0.5).toFixed(1) + '% improvement';
            
            // Render WhatsApp API keys
            const whatsappContainer = document.getElementById('whatsappKeysContainer');
            if (whatsappKeys.length === 0) {
                // Keep empty state
            } else {
                // Clear container
                whatsappContainer.innerHTML = '';
                
                // Add keys
                whatsappKeys.forEach(key => {
                    const keyElement = createApiKeyElement(key, 'whatsapp');
                    whatsappContainer.appendChild(keyElement);
                });
            }
            
            // Render URL Research API keys
            const urlContainer = document.getElementById('urlKeysContainer');
            if (urlKeys.length === 0) {
                // Keep empty state
            } else {
                // Clear container
                urlContainer.innerHTML = '';
                
                // Add keys
                urlKeys.forEach(key => {
                    const keyElement = createApiKeyElement(key, 'url');
                    urlContainer.appendChild(keyElement);
                });
            }
        }
        
        function createApiKeyElement(key, type) {
            const card = document.createElement('div');
            card.className = 'api-key-card';
            card.innerHTML = `
                <div class="api-key-header">
                    <div class="api-type">
                        <i class="${type === 'whatsapp' ? 'fab fa-whatsapp' : 'fas fa-link'}"></i>
                        ${type === 'whatsapp' ? 'WhatsApp Bot API' : 'URL Research API'}
                        <span class="${type === 'whatsapp' ? 'whatsapp-tag' : 'url-tag'}">${key.status || 'ACTIVE'}</span>
                    </div>
                    <div class="api-key-actions">
                        <div class="action-btn edit-key" data-id="${key.id}" title="Edit">
                            <i class="fas fa-edit"></i>
                        </div>
                        <div class="action-btn delete-key" data-id="${key.id}" title="Delete">
                            <i class="fas fa-trash"></i>
                        </div>
                    </div>
                </div>
                <div class="api-key-content">
                    ${key.key}
                    <button class="copy-btn" title="Copy to clipboard" data-clipboard="${key.key}">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
                <div class="api-key-footer">
                    <div class="key-status">
                        <span class="status-${key.status === 'ACTIVE' ? 'active' : 'inactive'}"></span>
                        ${key.status === 'ACTIVE' ? 'Active since ' + new Date(key.createdAt).toLocaleDateString() : 'Created on ' + new Date(key.createdAt).toLocaleDateString()}
                    </div>
                    <div>Requests: ${key.requests || 0}</div>
                </div>
            `;
            
            return card;
        }
        
        function initUsageHistory() {
            // Generate random usage history for demo
            const endpoints = [
                '/whatsapp/send',
                '/whatsapp/status',
                '/url/analyze',
                '/url/metadata',
                '/whatsapp/template',
                '/url/screenshot'
            ];
            
            const methods = ['POST', 'GET'];
            const statuses = [
                {code: 200, class: 'success'},
                {code: 201, class: 'success'},
                {code: 400, class: 'error'},
                {code: 401, class: 'error'},
                {code: 404, class: 'error'},
                {code: 500, class: 'error'}
            ];
            
            const historyTableBody = document.getElementById('historyTableBody');
            historyTableBody.innerHTML = '';
            
            // Get API keys to use for history
            const whatsappKeys = JSON.parse(localStorage.getItem('whatsappKeys') || '[]');
            const urlKeys = JSON.parse(localStorage.getItem('urlKeys') || '[]');
            const allKeys = [...whatsappKeys.map(k => ({...k, type: 'whatsapp'})), ...urlKeys.map(k => ({...k, type: 'url'}))];
            
            if (allKeys.length === 0) {
                // Add some placeholder keys for history
                allKeys.push({
                    id: 'placeholder_whatsapp',
                    key: 'zts_whatsapp_placeholder',
                    type: 'whatsapp',
                    createdAt: new Date(Date.now() - 86400000 * 7).toISOString()
                });
                allKeys.push({
                    id: 'placeholder_url',
                    key: 'zts_url_placeholder',
                    type: 'url',
                    createdAt: new Date(Date.now() - 86400000 * 5).toISOString()
                });
            }
            
            // Generate 20 random history entries
            for (let i = 0; i < 20; i++) {
                const randomKey = allKeys[Math.floor(Math.random() * allKeys.length)];
                const randomEndpoint = endpoints[Math.floor(Math.random() * endpoints.length)];
                const randomMethod = methods[Math.floor(Math.random() * methods.length)];
                const randomStatus = statuses[Math.floor(Math.random() * statuses.length)];
                const randomTime = new Date(Date.now() - Math.random() * 86400000 * 30);
                const randomResponseTime = Math.floor(100 + Math.random() * 500);
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${randomTime.toLocaleString()}</td>
                    <td>${randomKey.key.substring(0, 15)}...</td>
                    <td>${randomEndpoint}</td>
                    <td>${randomMethod}</td>
                    <td><span class="status-badge status-${randomStatus.class}">${randomStatus.code}</span></td>
                    <td>${randomResponseTime}ms</td>
                `;
                historyTableBody.appendChild(row);
            }
            
            // Update analytics stats
            document.getElementById('totalRequests').textContent = '2,847';
            document.getElementById('analyticsSuccessRate').textContent = '98.7%';
            document.getElementById('avgResponseTime').textContent = '247ms';
        }
        
        function setupEventListeners() {
            // Menu toggle for mobile
            document.getElementById('menuToggle').addEventListener('click', function() {
                document.querySelector('.sidebar').classList.toggle('active');
            });
            
            // Sidebar menu navigation
            document.querySelectorAll('.menu-link').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Remove active class from all links
                    document.querySelectorAll('.menu-link').forEach(l => l.classList.remove('active'));
                    
                    // Add active class to clicked link
                    this.classList.add('active');
                    
                    // Hide all sections
                    document.querySelectorAll('[id$="Section"]').forEach(section => {
                        section.style.display = 'none';
                    });
                    
                    // Show selected section
                    const sectionId = this.getAttribute('data-section') + 'Section';
                    if (document.getElementById(sectionId)) {
                        document.getElementById(sectionId).style.display = 'block';
                    }
                });
            });
            
            // Create WhatsApp API key
            document.getElementById('createWhatsAppKey').addEventListener('click', createWhatsAppKey);
            document.getElementById('createWhatsAppKey2').addEventListener('click', createWhatsAppKey);
            
            // Create URL Research API key
            document.getElementById('createUrlKey').addEventListener('click', createUrlKey);
            document.getElementById('createUrlKey2').addEventListener('click', createUrlKey);
            
            // Copy API key to clipboard
            document.addEventListener('click', function(e) {
                if (e.target.closest('.copy-btn')) {
                    const btn = e.target.closest('.copy-btn');
                    const apiKey = btn.getAttribute('data-clipboard') || btn.parentElement.textContent.replace('Copy to clipboard', '').trim();
                    
                    navigator.clipboard.writeText(apiKey).then(() => {
                        const originalIcon = btn.innerHTML;
                        btn.innerHTML = '<i class="fas fa-check"></i>';
                        setTimeout(() => {
                            btn.innerHTML = originalIcon;
                        }, 2000);
                        
                        // Show notification
                        alert('API key copied to clipboard!');
                    }).catch(err => {
                        console.error('Failed to copy: ', err);
                        alert('Failed to copy API key');
                    });
                }
            });
            
            // Delete API key
            document.addEventListener('click', function(e) {
                if (e.target.closest('.delete-key')) {
                    const btn = e.target.closest('.delete-key');
                    const keyId = btn.getAttribute('data-id');
                    const keyType = btn.closest('.api-key-card').querySelector('.fab.fa-whatsapp') ? 'whatsapp' : 'url';
                    
                    if (confirm('Are you sure you want to delete this API key? This action cannot be undone.')) {
                        deleteApiKey(keyId, keyType);
                    }
                }
            });
            
            // Edit API key (placeholder)
            document.addEventListener('click', function(e) {
                if (e.target.closest('.edit-key')) {
                    const btn = e.target.closest('.edit-key');
                    const keyId = btn.getAttribute('data-id');
                    alert('Edit functionality would open a modal to update the API key details.');
                }
            });
            
            // Profile form submission
            document.getElementById('profileForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const firstName = document.getElementById('editFirstName').value;
                const lastName = document.getElementById('editLastName').value;
                const email = document.getElementById('editEmail').value;
                const company = document.getElementById('editCompany').value;
                
                // Update user in localStorage
                const registeredUsers = JSON.parse(localStorage.getItem('registeredUsers') || '[]');
                const currentUserEmail = localStorage.getItem('userEmail');
                const userIndex = registeredUsers.findIndex(u => u.email === currentUserEmail);
                
                if (userIndex !== -1) {
                    registeredUsers[userIndex].firstName = firstName;
                    registeredUsers[userIndex].lastName = lastName;
                    registeredUsers[userIndex].email = email;
                    registeredUsers[userIndex].company = company;
                    
                    localStorage.setItem('registeredUsers', JSON.stringify(registeredUsers));
                    
                    // Update current user data
                    localStorage.setItem('userEmail', email);
                    localStorage.setItem('username', `${firstName} ${lastName}`);
                    
                    // Update UI
                    document.getElementById('sidebarUsername').textContent = `${firstName} ${lastName}`;
                    document.getElementById('sidebarEmail').textContent = email;
                    document.getElementById('headerUsername').textContent = `${firstName} ${lastName}`;
                    document.getElementById('profileName').textContent = `${firstName} ${lastName}`;
                    document.getElementById('profileEmail').textContent = email;
                    document.getElementById('profileCompany').textContent = company || 'Not specified';
                    
                    alert('Profile updated successfully!');
                }
            });
            
            // Theme toggle
            document.getElementById('themeToggle').addEventListener('click', function() {
                // This would toggle dark/light mode in a real app
                alert('Dark/Light mode toggle would be implemented here.');
            });
            
            // Dark mode toggle
            document.getElementById('darkModeToggle').addEventListener('change', function() {
                if (this.checked) {
                    document.body.style.backgroundColor = '#1a1a1a';
                    document.body.style.color = '#f8fafc';
                } else {
                    document.body.style.backgroundColor = '#f8fafc';
                    document.body.style.color = '#0f172a';
                }
                
                // Save preference to localStorage
                localStorage.setItem('darkMode', this.checked ? 'true' : 'false');
            });
            
            // Load dark mode preference
            const darkMode = localStorage.getItem('darkMode') === 'true';
            document.getElementById('darkModeToggle').checked = darkMode;
            if (darkMode) {
                document.body.style.backgroundColor = '#1a1a1a';
                document.body.style.color = '#f8fafc';
            }
            
            // Logout
            document.getElementById('logoutBtn').addEventListener('click', function() {
                if (confirm('Are you sure you want to logout?')) {
                    localStorage.removeItem('isLoggedIn');
                    localStorage.removeItem('userEmail');
                    localStorage.removeItem('username');
                    localStorage.removeItem('role');
                    localStorage.removeItem('owner_logged_in');
                    window.location.href = 'login.html';
                }
            });
            
            // Export history
            document.getElementById('exportHistory').addEventListener('click', function() {
                alert('CSV export functionality would be implemented here.');
            });
            
            // Enable 2FA
            document.getElementById('enable2fa').addEventListener('click', function() {
                alert('Two-factor authentication setup would be implemented here.');
            });
            
            // Change password
            document.getElementById('changePassword').addEventListener('click', function() {
                alert('Password change functionality would be implemented here.');
            });
            
            // Invite team member
            document.getElementById('inviteTeamMember').addEventListener('click', function() {
                alert('Team member invitation functionality would be implemented here.');
            });
            document.getElementById('inviteTeamMember2').addEventListener('click', function() {
                alert('Team member invitation functionality would be implemented here.');
            });
            
            // AI Assistant
            document.getElementById('aiAssistant').addEventListener('click', function() {
                // Create AI assistant modal
                const modal = document.createElement('div');
                modal.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background-color: rgba(0, 0, 0, 0.5);
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    z-index: 2000;
                    padding: 20px;
                `;
                
                modal.innerHTML = `
                    <div style="background: white; border-radius: 16px; width: 100%; max-width: 500px; max-height: 80vh; overflow: hidden; display: flex; flex-direction: column; box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);">
                        <div style="background: linear-gradient(135deg, #2563eb, #7c3aed); color: white; padding: 20px; display: flex; align-items: center; justify-content: space-between;">
                            <h3 style="margin: 0; font-weight: 600;">Zeetasi AI Assistant</h3>
                            <button id="closeAssistant" style="background: none; border: none; color: white; font-size: 1.5rem; cursor: pointer;">&times;</button>
                        </div>
                        <div id="chatMessages" style="flex: 1; padding: 20px; overflow-y: auto; background-color: #f8fafc;">
                            <div style="background: white; padding: 15px; border-radius: 12px; margin-bottom: 15px; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);">
                                <strong>AI Assistant:</strong> Hello! I'm your Zeetasi AI assistant. How can I help you with your API keys or dashboard today?
                            </div>
                        </div>
                        <div style="padding: 20px; border-top: 1px solid #e2e8f0; display: flex; gap: 10px;">
                            <input type="text" id="userQuery" placeholder="Type your question here..." style="flex: 1; padding: 12px 15px; border: 2px solid #e2e8f0; border-radius: 8px; font-family: 'Poppins', sans-serif; font-size: 1rem;">
                            <button id="sendQuery" style="background: linear-gradient(135deg, #2563eb, #7c3aed); color: white; border: none; padding: 0 20px; border-radius: 8px; cursor: pointer; font-weight: 500;">Send</button>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(modal);
                
                // Close modal
                document.getElementById('closeAssistant').addEventListener('click', function() {
                    document.body.removeChild(modal);
                });
                
                // Send query
                document.getElementById('sendQuery').addEventListener('click', function() {
                    const queryInput = document.getElementById('userQuery');
                    const query = queryInput.value.trim();
                    
                    if (query) {
                        // Add user message
                        const chatMessages = document.getElementById('chatMessages');
                        const userMessage = document.createElement('div');
                        userMessage.style.cssText = 'background: #2563eb; color: white; padding: 15px; border-radius: 12px; margin-bottom: 15px; margin-left: 20%;';
                        userMessage.innerHTML = `<strong>You:</strong> ${query}`;
                        chatMessages.appendChild(userMessage);
                        
                        // Clear input
                        queryInput.value = '';
                        
                        // Show typing indicator
                        const typingIndicator = document.createElement('div');
                        typingIndicator.style.cssText = 'background: white; padding: 15px; border-radius: 12px; margin-bottom: 15px; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);';
                        typingIndicator.innerHTML = '<strong>AI Assistant:</strong> <i>Thinking...</i>';
                        chatMessages.appendChild(typingIndicator);
                        
                        // Scroll to bottom
                        chatMessages.scrollTop = chatMessages.scrollHeight;
                        
                        // Simulate AI response
                        setTimeout(() => {
                            chatMessages.removeChild(typingIndicator);
                            
                            let response = '';
                            if (query.toLowerCase().includes('whatsapp')) {
                                response = "For WhatsApp Bot API, you can create and manage API keys from the WhatsApp section of your dashboard. Each key allows you to send messages, manage contacts, and automate conversations. The API supports text, images, documents, and location sharing. Click 'Create New Key' to generate a new API key.";
                            } else if (query.toLowerCase().includes('url') || query.toLowerCase().includes('research')) {
                                response = "Our URL Research API allows you to analyze any webpage. You can get metadata, content analysis, SEO metrics, and more. Simply make a GET request with your API key and the URL you want to analyze. You can create and manage these keys in the URL Research section of your dashboard.";
                            } else if (query.toLowerCase().includes('api key') || query.toLowerCase().includes('token')) {
                                response = "API keys are displayed in their respective sections (WhatsApp or URL Research). You can create new keys with the 'Create New Key' button, copy existing keys to your clipboard, or delete keys you no longer need. Your main API token is also available in your Profile section.";
                            } else if (query.toLowerCase().includes('profile') || query.toLowerCase().includes('account')) {
                                response = "You can manage your profile by clicking on 'Profile' in the sidebar. There you can update your personal information, view your API token, and see your account details. You can also manage your preferences like dark mode and notifications in the Preferences section.";
                            } else if (query.toLowerCase().includes('history') || query.toLowerCase().includes('usage')) {
                                response = "Your API usage history is available in the 'Usage History' section. You can see detailed logs of all your API requests, including timestamps, endpoints, methods, status codes, and response times. You can also export this data as a CSV file for further analysis.";
                            } else if (query.toLowerCase().includes('analytics') || query.toLowerCase().includes('statistics')) {
                                response = "The Analytics section provides visual representations of your API usage over time. You can see your total requests, success rate, and average response time. Use the time range selector to view data for different periods.";
                            } else {
                                response = "I can help you with questions about API keys, documentation, profile management, or any other aspect of the Zeetasi platform. Try asking about WhatsApp API, URL Research API, or how to manage your profile.";
                            }
                            
                            const aiMessage = document.createElement('div');
                            aiMessage.style.cssText = 'background: white; padding: 15px; border-radius: 12px; margin-bottom: 15px; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);';
                            aiMessage.innerHTML = `<strong>AI Assistant:</strong> ${response}`;
                            chatMessages.appendChild(aiMessage);
                            
                            // Scroll to bottom
                            chatMessages.scrollTop = chatMessages.scrollHeight;
                        }, 1500);
                    }
                });
                
                // Allow Enter key to send message
                document.getElementById('userQuery').addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        document.getElementById('sendQuery').click();
                    }
                });
            });
            
            // Documentation tabs
            document.querySelectorAll('.doc-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    // Remove active class from all tabs
                    document.querySelectorAll('.doc-tab').forEach(t => t.classList.remove('active'));
                    // Add active class to clicked tab
                    this.classList.add('active');
                    
                    // In a real app, this would show different content based on the tab
                    const tabName = this.getAttribute('data-tab');
                    console.log(`Showing ${tabName} documentation`);
                });
            });
        }
        
        function createWhatsAppKey() {
            const keyId = generateUUID();
            const apiKey = 'zts_whatsapp_' + generateRandomString(32);
            const newKey = {
                id: keyId,
                key: apiKey,
                status: 'ACTIVE',
                createdAt: new Date().toISOString(),
                requests: 0
            };
            
            // Get existing keys
            const whatsappKeys = JSON.parse(localStorage.getItem('whatsappKeys') || '[]');
            
            // Add new key
            whatsappKeys.push(newKey);
            
            // Save to localStorage
            localStorage.setItem('whatsappKeys', JSON.stringify(whatsappKeys));
            
            // Update UI
            initApiKeys();
            
            // Show success message
            alert('WhatsApp API key created successfully!');
        }
        
        function createUrlKey() {
            const keyId = generateUUID();
            const apiKey = 'zts_url_' + generateRandomString(32);
            const newKey = {
                id: keyId,
                key: apiKey,
                status: 'ACTIVE',
                createdAt: new Date().toISOString(),
                requests: 0
            };
            
            // Get existing keys
            const urlKeys = JSON.parse(localStorage.getItem('urlKeys') || '[]');
            
            // Add new key
            urlKeys.push(newKey);
            
            // Save to localStorage
            localStorage.setItem('urlKeys', JSON.stringify(urlKeys));
            
            // Update UI
            initApiKeys();
            
            // Show success message
            alert('URL Research API key created successfully!');
        }
        
        function deleteApiKey(keyId, keyType) {
            // Get existing keys
            const keys = JSON.parse(localStorage.getItem(keyType + 'Keys') || '[]');
            
            // Filter out the key to delete
            const updatedKeys = keys.filter(key => key.id !== keyId);
            
            // Save to localStorage
            localStorage.setItem(keyType + 'Keys', JSON.stringify(updatedKeys));
            
            // Update UI
            initApiKeys();
            
            // Show success message
            alert(`${keyType === 'whatsapp' ? 'WhatsApp' : 'URL Research'} API key deleted successfully!`);
        }
        
        function generateUUID() {
            return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
                var r = Math.random() * 16 | 0,
                    v = c == 'x' ? r : (r & 0x3 | 0x8);
                return v.toString(16);
            });
        }
        
        function generateRandomString(length) {
            const chars = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
            let result = '';
            for (let i = 0; i < length; i++) {
                result += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return result;
        }
    </script>
</body>
</html>
